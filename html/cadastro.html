<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Libr - Biblioteca</title>
    <link rel="stylesheet" href="../css/index.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="/js/script.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <div id="header"></div>

    <!-- <div class="container options">
        <a href="home.html">Acervo</a>
        <a href="emprestimos.html">Empréstimos</a>
        <a href="#" class="selected">Cadastro</a>
        <a href="index.html">Logout</a>
    </div> -->

    <div class="container">
        <div class="form-container">
            <h2>Cadastro de Livro</h2>
            <form id="bookForm" onsubmit="cadastrarLivro(event)">
                <label for="nomeLivro">Nome do Livro:</label>
                <input type="text" id="nomeLivro" name="nomeLivro" required>

                <label for="autor">Autor:</label>
                <input type="text" id="autor" name="autor" required>

                <label for="dataLancamento">Ano de Lançamento:</label>
                <input type="text" id="dataLancamento" name="dataLancamento" required>

                <label for="descricao">Descrição:</label>
                <textarea id="descricao" name="descricao" required></textarea>

                <label for="quantidade">Quantidade:</label>
                <input type="number" id="quantidade" name="quantidade" value="1" min="1" required>

                <input type="submit" value="Cadastrar Livro">
            </form>
        </div>
    </div>

    <div id="footer"></div>

    <script>
        function cadastrarLivro(event) {
            event.preventDefault(); // Evita que o formulário seja submetido normalmente

            // Coleta os valores dos campos do formulário
            var nomeLivro = document.getElementById('nomeLivro').value;
            var autor = document.getElementById('autor').value;
            var dataLancamento = document.getElementById('dataLancamento').value;
            var descricao = document.getElementById('descricao').value;
            var quantidade = parseInt(document.getElementById('quantidade').value);

            // Cria um array para armazenar os livros no armazenamento local
            var livros = JSON.parse(localStorage.getItem('livros')) || [];

            // Adiciona o livro ao array 'livros'
            for (var i = 0; i < quantidade; i++) {
                livros.push({
                    nome: nomeLivro,
                    autor: autor,
                    dataLancamento: dataLancamento,
                    descricao: descricao
                });
            }

            // Armazena o array de livros no armazenamento local
            localStorage.setItem('livros', JSON.stringify(livros));

            // Limpa os campos do formulário após o cadastro
            document.getElementById('bookForm').reset();

            Swal.fire({
                title: "Cadastro realizado!",
                icon: "success",
            });
        }
    </script>
</body>
</html>